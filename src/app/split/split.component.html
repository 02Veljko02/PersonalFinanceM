<div class="categorization-container">
    <div class="categorization-box">
        <div class="categorization-header">
            Choose category:
        </div>
        <div class="categorization-content" *ngFor="let categorySection of categorySections; let i = index">
            <div class="white-background-text">
                <ng-container *ngIf="i === 0; else removeButton">
                    Transaction ID: {{ transactionId }}
                </ng-container>
                <ng-template #removeButton>
                    <button type="button" (click)="removeCategorySection(i)">Remove this category</button>
                </ng-template>
            </div>
            <div class="dropdowns">
                <label for="category">Category:</label>
                <select id="category-{{i}}" name="category" [(ngModel)]="categorySection.mainCategory" (change)="onCategoryChange(i)">
                    <option *ngFor="let mainCategory of mainCategories" [value]="mainCategory.code">
                        {{ mainCategory.name }}
                    </option>
                </select>
                <label for="subcategory">Subcategory:</label>
                <select id="subcategory-{{i}}" name="subcategory" [(ngModel)]="categorySection.subcategory">
                    <option *ngFor="let subcat of subcategories[i]" [value]="subcat.code">
                        {{ subcat.name }}
                    </option>
                </select>
                <label for="amount">Enter amount:</label>
                <input type="text" id="amount-{{i}}" name="amount" [(ngModel)]="categorySection.amount">
            </div>
        </div>
        <button type="button" (click)="addNewCategorySection()">Add new category</button>
        <div class="categorization-footer">
            <button type="button" (click)="backToMain()">Cancel</button>
            <button type="button" (click)="applyCategory()" [disabled]="!isFormValid()">Apply</button>
        </div>
    </div>
</div>